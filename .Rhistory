bind_rows()) %>%
bind_rows()
View(find_display_names)
names <- data_frame(node = find_display_names) %>%
mutate(name_display = node %>% map(~ xml_text(.))) %>%
select(-node)
View(names)
find_display_names <- folder_1 %>%
map(read_xml) %>%
map(~xml_find_all(., ".//chamber.xscript//debate//subdebate.1//speech//name[@role = 'display']"))
View(unique_para)
pattern_1 <- START %R% one_or_more(WRD) %R% DOT
library(rebus)
library(stringr)
install.packages("rebus")
pattern = START %R% one_or_more(WRD) %R% DOT
library(rebus)
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel"))
long_edits <- long %>%
mutate(para = gsub('CHAIRMAN"',"CHAIRMAN")) %>%
mutate(para =  sub("The Witness.  -  |The  TREASURER.-| The TEMPORARYCHAIRMAN. - |The TEMPORARYCHAIRMAN (Mr. Atkinson). -|The TEMPORARY-CHAIRMAN.|The TEMPORARY- CHAIRMAN.|The TEMPORARY CHAIRMAN.|The CHAIRMAN (Mr. Clark).|The CHAIRMAN (Mr. Bayley).|The Chairman:|The CHAIRMAN (Mr. Riordan).|The CHAIRMAN (Mr. Prowse).|The CHAIRMAN (Mr. McGrath).|The CHAIRMAN (Mr. Lucock).|The chairman (Mr. Fenton, M.P.) :|The CHAIRMAN (Mr. Clark).|The CHAIRMAN (Mr. Bowden).|The CHAIRMAN (Mr. Bell).|The CHAIRMAN (Mr. Bayley).|The CHAIRMAN (Mr. Adermann|The CHAIRMAN (Mr McGrath)|The CHAIRMA\N|The CHAIRM AN.|The CHAI!RMAN|The CHAD1MAN|The CH AIRMAN.|The CH AIRMAN (Mr. Bayley). |The ACTING CHAIRMAN. -|The ACTING CHAIRMAN (Mr. V. L. Solomon). - |The ACTING CHAIRMAN (Mr. Kirwan). -|The ACTING CHAIRMAN (Mr. Fleming). -|The ACTING CHAIRMAN (Mr. Batchelor). -|The ACTING  CHAIRMAN.|The -CHAIRMAN. -|The  SPEAKER__|The  DEPUTY CHAIRMAN.- |The  DEPUTY CHAIRMAN.|The  DEPUTY CHAIRMAN-|The  DEPUTY CHAIRMAN (Hon. W. CHaworth)  -|The  DEPUTY CHAIRMAN (Hon. W. C. Haworth)  -|The  DEPUTY CHAIRMAN (Hon. W. C. Haworth)  -|The  DEPUTY CHAIRMAN (Hon. J. D. M. Dobie)  -|The  DEPUTY CHAIRMAN (Hon. Ian Robinson)-|The  DEPUTY CHAIRMAN (Dr Jenkins)  -|The  DEPUTY CHAIRMAN  .-|The  DEPUTY CHAIRMAN  -|The  DEPUTY  CHAIRMAN.|The  DEPUTY  CHAIRMAN-|The  CHAIRMAN.-|The  CHAiRMAN.-|The  CHAIRMAN.|The  CHAIRMAN (Hon. J. M. Chanter).|SirWilliammcmillan.-|SirWilliamMcMillan. -|SirWILLIAMLYNE-|SirWilliam McMillan. -|SirWILLIAM McMILLAN. -|SirWilliam McMillan. -|SirWILLIAM LYNE.-|SirWilliam Lyne.|SirWILLIAM LYNE. -|SirWILLIAM LYNE-|SirWILLIAM LYNE (Hume). -|SirWILLIAM LYN E. -|SirWilliam Irvine.  -|SirWilliam  Lyne.  -|SirWILLI AM McMILLAN. -|SirWILLI AM LYNE (Hume - Treasurer)  [5.51].  -|SirRobertbest.-|SirRobert Best.|SirROBERT BEST.|SirRobert Best.|SirRobert Best.|SirROBERT BEST (Kooyong) [4.0]. -|Sirphilip  Fysh. -|SirNEVILLE HOWSE.-|SirNEVILLE HOWSE (CalareMinister for Defence) [3.50]|4	SirLITTLETON GROOM  (Darling |	SirJOSEPH COOK.|SirJohnQuick.|SirJOHNFORREST.|SirJohnForrest.|SirJOHNFORREST (Swan- Treasurer) [9.59]. -|SirJOHN QUICK(Bendigo- PostmasterGeneral) [9.1]|SirJOHN QUICK.-|Sirjohn Quick.|SirJOHN QUICK (Bendigo). -|SirJohn Forrest.|SirJOHN FORREST.-|SirJohn Forrest. - |SirJOHN FORREST. -|SirHenryGullett.  -|SirHenry Gullett.|SirHENRY GULLETT  (Henty) (3.24].-|Colonel  Foxton. -|An  Honorable Member.|Several honorable members",". Split text here:", para))
long_edits <- long %>%
mutate(para = gsub('CHAIRMAN"',"CHAIRMAN",para),
para = gsub("The CHAIRMA\N","CHAIRMAN",para)) %>%
long_edits <- long %>%
mutate(para = gsub('CHAIRMAN"',"CHAIRMAN",para)) %>%
mutate(para =  sub("The Witness.  -  |The  TREASURER.-| The TEMPORARYCHAIRMAN. - |The TEMPORARYCHAIRMAN (Mr. Atkinson). -|The TEMPORARY-CHAIRMAN.|The TEMPORARY- CHAIRMAN.|The TEMPORARY CHAIRMAN.|The CHAIRMAN (Mr. Clark).|The CHAIRMAN (Mr. Bayley).|The Chairman:|The CHAIRMAN (Mr. Riordan).|The CHAIRMAN (Mr. Prowse).|The CHAIRMAN (Mr. McGrath).|The CHAIRMAN (Mr. Lucock).|The chairman (Mr. Fenton, M.P.) :|The CHAIRMAN (Mr. Clark).|The CHAIRMAN (Mr. Bowden).|The CHAIRMAN (Mr. Bell).|The CHAIRMAN (Mr. Bayley).|The CHAIRMAN (Mr. Adermann|The CHAIRMAN (Mr McGrath)|The CHAIRM AN.|The CHAI!RMAN|The CHAD1MAN|The CH AIRMAN.|The CH AIRMAN (Mr. Bayley). |The ACTING CHAIRMAN. -|The ACTING CHAIRMAN (Mr. V. L. Solomon). - |The ACTING CHAIRMAN (Mr. Kirwan). -|The ACTING CHAIRMAN (Mr. Fleming). -|The ACTING CHAIRMAN (Mr. Batchelor). -|The ACTING  CHAIRMAN.|The -CHAIRMAN. -|The  SPEAKER__|The  DEPUTY CHAIRMAN.- |The  DEPUTY CHAIRMAN.|The  DEPUTY CHAIRMAN-|The  DEPUTY CHAIRMAN (Hon. W. CHaworth)  -|The  DEPUTY CHAIRMAN (Hon. W. C. Haworth)  -|The  DEPUTY CHAIRMAN (Hon. W. C. Haworth)  -|The  DEPUTY CHAIRMAN (Hon. J. D. M. Dobie)  -|The  DEPUTY CHAIRMAN (Hon. Ian Robinson)-|The  DEPUTY CHAIRMAN (Dr Jenkins)  -|The  DEPUTY CHAIRMAN  .-|The  DEPUTY CHAIRMAN  -|The  DEPUTY  CHAIRMAN.|The  DEPUTY  CHAIRMAN-|The  CHAIRMAN.-|The  CHAiRMAN.-|The  CHAIRMAN.|The  CHAIRMAN (Hon. J. M. Chanter).|SirWilliammcmillan.-|SirWilliamMcMillan. -|SirWILLIAMLYNE-|SirWilliam McMillan. -|SirWILLIAM McMILLAN. -|SirWilliam McMillan. -|SirWILLIAM LYNE.-|SirWilliam Lyne.|SirWILLIAM LYNE. -|SirWILLIAM LYNE-|SirWILLIAM LYNE (Hume). -|SirWILLIAM LYN E. -|SirWilliam Irvine.  -|SirWilliam  Lyne.  -|SirWILLI AM McMILLAN. -|SirWILLI AM LYNE (Hume - Treasurer)  [5.51].  -|SirRobertbest.-|SirRobert Best.|SirROBERT BEST.|SirRobert Best.|SirRobert Best.|SirROBERT BEST (Kooyong) [4.0]. -|Sirphilip  Fysh. -|SirNEVILLE HOWSE.-|SirNEVILLE HOWSE (CalareMinister for Defence) [3.50]|4	SirLITTLETON GROOM  (Darling |	SirJOSEPH COOK.|SirJohnQuick.|SirJOHNFORREST.|SirJohnForrest.|SirJOHNFORREST (Swan- Treasurer) [9.59]. -|SirJOHN QUICK(Bendigo- PostmasterGeneral) [9.1]|SirJOHN QUICK.-|Sirjohn Quick.|SirJOHN QUICK (Bendigo). -|SirJohn Forrest.|SirJOHN FORREST.-|SirJohn Forrest. - |SirJOHN FORREST. -|SirHenryGullett.  -|SirHenry Gullett.|SirHENRY GULLETT  (Henty) (3.24].-|Colonel  Foxton. -|An  Honorable Member.|Several honorable members",". Split text here:", para))
long2_clean <- long2 %>%
separate_rows(talk.start,
sep="Split name here:") %>%
separate_rows(interject,
sep="Split name here:") %>%
separate_rows(`break`,
sep="Split name here:") %>%
select(-division, -error) %>%
separate(talk.start, # grab speaker info from text
c("talker","text"),
sep = c(" Split text here:"),
extra = "merge",
fill = 'right',
remove = TRUE) %>%
separate(interject, # grab speaker info from text
c("interject_talker","interjection"),
sep = c(" Split text here:"),
extra = "merge",
fill = 'right',
remove = TRUE) %>%
mutate(talker = coalesce(talker, interject_talker)) %>%
select(-interject_talker) %>%
mutate(text_type = ifelse(!is.na(interjection), "interjection", " "),
text_type = ifelse(!is.na(text), "text.start", text_type),
text = coalesce(text, interjection, para, `break`)) %>%
select(-c(interjection, para, `break`)) %>%
drop_na(text) %>%
group_by(file) %>%
mutate(speech = cumsum(str_detect(text_type, "text.start")),
text_type = ifelse(text_type == " ", NA_character_, text_type)) %>%
ungroup() %>%
separate(talker, # grab speaker info from text
c("name","info"),
sep = c(" Split info here:"),
extra = "merge",
fill = 'right',
remove = TRUE) %>%
group_by(file, speech, cumsum(!is.na(name))) %>%
summarise(name = name[!is.na(name)],
text = paste(text, collapse = ' '),
text_type = paste(text_type, collapse = ','),
info = info[!is.na(info)],) %>%
ungroup() %>%
mutate(timestamp = NA_character_,
quote = NA_character_,
text_type = sub(",.*","",text_type)) %>%
select(-`cumsum(!is.na(name))`) %>%
mutate(info  = gsub("Split info here:", "",info))
# rename data frame
folder_2_df <- long2_clean
# save
saveRDS(folder_2_df, file = here("data", "cleanish", "speeches","speeches_folder2.RData"))
View(long3)
View(folder_2_df)
regex.escape <- function(string) {
gsub("([][{}()+*^${|\\\\?])", "\\\\\\1", string)
}
sort.by.length.desc <- function (v) v[order( -nchar(v)) ]
name <- c('Mrs. Emily S', 'Dr. Richard L', 'Dr. Drake D', 'Mr. Mrdrmsmrs', 'Test Name')
prefix <- c('Dr.', 'Mr.', 'Ms.', 'Mrs.', 'Capt.')
prefix <- sort.by.length.desc(prefix)
prefix
res <- trimws(gsub(paste0("^(?:",paste(regex.escape(prefix), collapse="|"), ")"), '', name, perl="TRUE"))
res
res <- trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', name, perl="TRUE"))
res
prefix <- c('Dr.', 'Mr.', 'Ms.', 'Mrs.', 'Capt.', 'The', 'Sir')
res <- trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE"))
## names in para that we need to split apart manually
## replace CHAIRMAN"
names_to_replace <- c("The Witness.  -  ", "The  TREASURER.-", " The TEMPORARYCHAIRMAN. - ", "The TEMPORARYCHAIRMAN (Mr. Atkinson). -", "The TEMPORARY-CHAIRMAN.", "The TEMPORARY- CHAIRMAN.", "The TEMPORARY CHAIRMAN.", "The CHAIRMAN (Mr. Clark).", "The CHAIRMAN (Mr. Bayley).", "The Chairman:", "The CHAIRMAN (Mr. Riordan).", "The CHAIRMAN (Mr. Prowse).", "The CHAIRMAN (Mr. McGrath).", "The CHAIRMAN (Mr. Lucock).", "The chairman (Mr. Fenton, M.P.) :", "The CHAIRMAN (Mr. Clark).", "The CHAIRMAN (Mr. Bowden).", "The CHAIRMAN (Mr. Bell).", "The CHAIRMAN (Mr. Bayley).", "The CHAIRMAN (Mr. Adermann", "The CHAIRMAN (Mr McGrath)", "The CHAIRMA\N", "The CHAIRM AN.", "The CHAI!RMAN", "The CHAD1MAN", "The CH AIRMAN.", "The CH AIRMAN (Mr. Bayley). ", "The ACTING CHAIRMAN. -", "The ACTING CHAIRMAN (Mr. V. L. Solomon). - ", "The ACTING CHAIRMAN (Mr. Kirwan). -", "The ACTING CHAIRMAN (Mr. Fleming). -", "The ACTING CHAIRMAN (Mr. Batchelor). -", "The ACTING  CHAIRMAN.", "The -CHAIRMAN. -", "The  SPEAKER__", "The  DEPUTY CHAIRMAN.- ", "The  DEPUTY CHAIRMAN.", "The  DEPUTY CHAIRMAN-", "The  DEPUTY CHAIRMAN (Hon. W. CHaworth)  -", "The  DEPUTY CHAIRMAN (Hon. W. C. Haworth)  -", "The  DEPUTY CHAIRMAN (Hon. W. C. Haworth)  -", "The  DEPUTY CHAIRMAN (Hon. J. D. M. Dobie)  -", "The  DEPUTY CHAIRMAN (Hon. Ian Robinson)-", "The  DEPUTY CHAIRMAN (Dr Jenkins)  -", "The  DEPUTY CHAIRMAN  .-", "The  DEPUTY CHAIRMAN  -", "The  DEPUTY  CHAIRMAN.", "The  DEPUTY  CHAIRMAN-", "The  CHAIRMAN.-", "The  CHAiRMAN.-", "The  CHAIRMAN.", "The  CHAIRMAN (Hon. J. M. Chanter).", "SirWilliammcmillan.-", "SirWilliamMcMillan. -", "SirWILLIAMLYNE-", "SirWilliam McMillan. -", "SirWILLIAM McMILLAN. -", "SirWilliam McMillan. -", "SirWILLIAM LYNE.-", "SirWilliam Lyne.", "SirWILLIAM LYNE. -", "SirWILLIAM LYNE-", "SirWILLIAM LYNE (Hume). -", "SirWILLIAM LYN E. -", "SirWilliam Irvine.  -", "SirWilliam  Lyne.  -", "SirWILLI AM McMILLAN. -", "SirWILLI AM LYNE (Hume - Treasurer)  [5.51].  -", "SirRobertbest.-", "SirRobert Best.", "SirROBERT BEST.", "SirRobert Best.", "SirRobert Best.", "SirROBERT BEST (Kooyong) [4.0]. -", "Sirphilip  Fysh. -", "SirNEVILLE HOWSE.-", "SirNEVILLE HOWSE (CalareMinister for Defence) [3.50]", "4	SirLITTLETON GROOM  (Darling ", "	SirJOSEPH COOK.", "SirJohnQuick.", "SirJOHNFORREST.", "SirJohnForrest.", "SirJOHNFORREST (Swan- Treasurer) [9.59]. -", "SirJOHN QUICK(Bendigo- PostmasterGeneral) [9.1]", "SirJOHN QUICK.-", "Sirjohn Quick.", "SirJOHN QUICK (Bendigo). -", "SirJohn Forrest.", "SirJOHN FORREST.-", "SirJohn Forrest. - ", "SirJOHN FORREST. -", "SirHenryGullett.  -", "SirHenry Gullett.", "SirHENRY GULLETT  (Henty) (3.24].-", "Colonel  Foxton. -")
## names in para that we need to split apart manually
## replace CHAIRMAN"
names_to_replace <- c("The Witness.  -  ", "The  TREASURER.-", " The TEMPORARYCHAIRMAN. - ", "The TEMPORARYCHAIRMAN (Mr. Atkinson). -", "The TEMPORARY-CHAIRMAN.", "The TEMPORARY- CHAIRMAN.", "The TEMPORARY CHAIRMAN.", "The CHAIRMAN (Mr. Clark).", "The CHAIRMAN (Mr. Bayley).", "The Chairman:", "The CHAIRMAN (Mr. Riordan).", "The CHAIRMAN (Mr. Prowse).", "The CHAIRMAN (Mr. McGrath).", "The CHAIRMAN (Mr. Lucock).", "The chairman (Mr. Fenton, M.P.) :", "The CHAIRMAN (Mr. Clark).", "The CHAIRMAN (Mr. Bowden).", "The CHAIRMAN (Mr. Bell).", "The CHAIRMAN (Mr. Bayley).", "The CHAIRMAN (Mr. Adermann", "The CHAIRMAN (Mr McGrath)",  "The CHAIRM AN.", "The CHAI!RMAN", "The CHAD1MAN", "The CH AIRMAN.", "The CH AIRMAN (Mr. Bayley). ", "The ACTING CHAIRMAN. -", "The ACTING CHAIRMAN (Mr. V. L. Solomon). - ", "The ACTING CHAIRMAN (Mr. Kirwan). -", "The ACTING CHAIRMAN (Mr. Fleming). -", "The ACTING CHAIRMAN (Mr. Batchelor). -", "The ACTING  CHAIRMAN.", "The -CHAIRMAN. -", "The  SPEAKER__", "The  DEPUTY CHAIRMAN.- ", "The  DEPUTY CHAIRMAN.", "The  DEPUTY CHAIRMAN-", "The  DEPUTY CHAIRMAN (Hon. W. CHaworth)  -", "The  DEPUTY CHAIRMAN (Hon. W. C. Haworth)  -", "The  DEPUTY CHAIRMAN (Hon. W. C. Haworth)  -", "The  DEPUTY CHAIRMAN (Hon. J. D. M. Dobie)  -", "The  DEPUTY CHAIRMAN (Hon. Ian Robinson)-", "The  DEPUTY CHAIRMAN (Dr Jenkins)  -", "The  DEPUTY CHAIRMAN  .-", "The  DEPUTY CHAIRMAN  -", "The  DEPUTY  CHAIRMAN.", "The  DEPUTY  CHAIRMAN-", "The  CHAIRMAN.-", "The  CHAiRMAN.-", "The  CHAIRMAN.", "The  CHAIRMAN (Hon. J. M. Chanter).", "SirWilliammcmillan.-", "SirWilliamMcMillan. -", "SirWILLIAMLYNE-", "SirWilliam McMillan. -", "SirWILLIAM McMILLAN. -", "SirWilliam McMillan. -", "SirWILLIAM LYNE.-", "SirWilliam Lyne.", "SirWILLIAM LYNE. -", "SirWILLIAM LYNE-", "SirWILLIAM LYNE (Hume). -", "SirWILLIAM LYN E. -", "SirWilliam Irvine.  -", "SirWilliam  Lyne.  -", "SirWILLI AM McMILLAN. -", "SirWILLI AM LYNE (Hume - Treasurer)  [5.51].  -", "SirRobertbest.-", "SirRobert Best.", "SirROBERT BEST.", "SirRobert Best.", "SirRobert Best.", "SirROBERT BEST (Kooyong) [4.0]. -", "Sirphilip  Fysh. -", "SirNEVILLE HOWSE.-", "SirNEVILLE HOWSE (CalareMinister for Defence) [3.50]", "4	SirLITTLETON GROOM  (Darling ", "	SirJOSEPH COOK.", "SirJohnQuick.", "SirJOHNFORREST.", "SirJohnForrest.", "SirJOHNFORREST (Swan- Treasurer) [9.59]. -", "SirJOHN QUICK(Bendigo- PostmasterGeneral) [9.1]", "SirJOHN QUICK.-", "Sirjohn Quick.", "SirJOHN QUICK (Bendigo). -", "SirJohn Forrest.", "SirJOHN FORREST.-", "SirJohn Forrest. - ", "SirJOHN FORREST. -", "SirHenryGullett.  -", "SirHenry Gullett.", "SirHENRY GULLETT  (Henty) (3.24].-", "Colonel  Foxton. -")
res <- trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE"))
res
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
mutate(name = trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE")))
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
mutate(name = trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), NA, names_to_replace, perl="TRUE")))
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate_rows(para, c(name, para), sep='paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")")')
res <- trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE"))
res
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate_rows(para, c(name, para), sep=paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"))
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate_rows(para, c(name, para), sep=gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE"))
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate_rows(para, c(name, para), sep=paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE")))
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate_rows(para, c(name, para), sep=paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE")
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c(name, para), sep=paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE")
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c(name, para), sep=paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE")
View(unique_para)
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
mutate(sep = trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE")))
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c(name, para), sep=paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE")
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c(name, para), sep=paste0("^(?<=",paste(regex.escape(names_to_replace), collapse="|")))
paste0("^(?<=",paste(regex.escape(names_to_replace), collapse="|"))
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c(name, para), sep=paste0("^(?<=",paste(regex.escape(names_to_replace), collapse="|"),")"))
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c(name, text), sep=paste0("^(?<=",paste(regex.escape(names_to_replace), collapse="|"),")"))
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c("name", "text"), sep=paste0("^(?<=",paste(regex.escape(names_to_replace), collapse="|"),")"))
View(unique_para)
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c("name", "text"), sep="(. -)|(.-)")
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c("name", "text"), sep="(. -)|(.-)|(\\).|)")
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c("name", "text"), sep="(. -)|(.-)|(\\).)|")
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c("name", "text"), sep="(. -)|(.-)|).)")
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c("name", "text"), sep="(. -)|(.-)|\\).)")
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
separate(para, c("name", "text"), sep="(. -)|(.-)|\\).")
res <- trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), " Split text here: )"), names_to_replace, perl="TRUE"))
res
prefix <- c('Dr.', 'Mr.', 'Ms.', 'Mrs.', 'Capt.', 'The', 'Sir', 'Colonel')
prefix <- sort.by.length.desc(prefix)
res <- trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', names_to_replace, perl="TRUE"))
res
res <- trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', unique_para$para, perl="TRUE"))
res <- trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', para, perl="TRUE"))
para <- unique_para$text
res <- trimws(gsub(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), '', para, perl="TRUE"))
res
prefix <- sort.by.length.desc(names_to_replace)
prefix
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel"))
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
mutate(TF = ifelse(grepl(paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), para), "TRUE", "FALSE"))
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
mutate(TF = ifelse(grepl(pattern=paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")"), para), "TRUE", "FALSE"))
paste0("^(?<=",paste(regex.escape(prefix), collapse="|"), ")")
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
mutate(TF = ifelse(grepl("^(?<=SirNEVILLE HOWSE \\(CalareMinister for Defence\\) \\[3.50\\]|SirWILLI AM LYNE \\(Hume - Treasurer\\)  \\[5.51\\].  -|SirJOHN QUICK\\(Bendigo- PostmasterGeneral\\) \\[9.1\\]|The  DEPUTY CHAIRMAN \\(Hon. J. D. M. Dobie\\)  -|The  DEPUTY CHAIRMAN \\(Hon. W. C. Haworth\\)  -|The  DEPUTY CHAIRMAN \\(Hon. W. C. Haworth\\)  -|The ACTING CHAIRMAN \\(Mr. V. L. Solomon\\). - |The  DEPUTY CHAIRMAN \\(Hon. W. CHaworth\\)  -|SirJOHNFORREST \\(Swan- Treasurer\\) \\[9.59\\]. -|The  DEPUTY CHAIRMAN \\(Hon. Ian Robinson\\)-|The TEMPORARYCHAIRMAN \\(Mr. Atkinson\\). -|The ACTING CHAIRMAN \\(Mr. Batchelor\\). -|The ACTING CHAIRMAN \\(Mr. Fleming\\). -|The  DEPUTY CHAIRMAN \\(Dr Jenkins\\)  -|The ACTING CHAIRMAN \\(Mr. Kirwan\\). -|The  CHAIRMAN \\(Hon. J. M. Chanter\\).|SirHENRY GULLETT  \\(Henty\\) \\(3.24\\].-|The chairman \\(Mr. Fenton, M.P.\\) :|SirROBERT BEST \\(Kooyong\\) \\[4.0\\]. -|4\tSirLITTLETON GROOM  \\(Darling |The CH AIRMAN \\(Mr. Bayley\\). |The CHAIRMAN \\(Mr. Riordan\\).|The CHAIRMAN \\(Mr. McGrath\\).| The TEMPORARYCHAIRMAN. - |The CHAIRMAN \\(Mr. Bayley\\).|The CHAIRMAN \\(Mr. Prowse\\).|The CHAIRMAN \\(Mr. Lucock\\).|The CHAIRMAN \\(Mr. Bowden\\).|The CHAIRMAN \\(Mr. Bayley\\).|The CHAIRMAN \\(Mr. Adermann|SirJOHN QUICK \\(Bendigo\\). -|The CHAIRMAN \\(Mr. Clark\\).|The CHAIRMAN \\(Mr. Clark\\).|The CHAIRMAN \\(Mr McGrath\\)|SirWILLIAM LYNE \\(Hume\\). -|The TEMPORARY- CHAIRMAN.|The CHAIRMAN \\(Mr. Bell\\).|The  DEPUTY CHAIRMAN  .-|The TEMPORARY-CHAIRMAN.|The TEMPORARY CHAIRMAN.|The  DEPUTY CHAIRMAN.- |The  DEPUTY CHAIRMAN  -|SirWILLI AM McMILLAN. -|The ACTING CHAIRMAN. -|The  DEPUTY  CHAIRMAN.|The  DEPUTY  CHAIRMAN-|SirWilliam McMillan. -|SirWILLIAM McMILLAN. -|SirWilliam McMillan. -|The ACTING  CHAIRMAN.|The  DEPUTY CHAIRMAN.|The  DEPUTY CHAIRMAN-|SirWilliamMcMillan. -|SirWilliam Irvine.  -|SirWilliammcmillan.-|SirWilliam  Lyne.  -|SirWILLIAM LYN E. -|SirJohn Forrest. - |SirHenryGullett.  -|SirWILLIAM LYNE. -|Sirphilip  Fysh. -|SirNEVILLE HOWSE.-|SirJOHN FORREST. -|Colonel  Foxton. -|The Witness.  -  |SirWILLIAM LYNE.-|SirJOHN FORREST.-|SirHenry Gullett.|The  TREASURER.-|The -CHAIRMAN. -|SirWilliam Lyne.|SirWILLIAM LYNE-|\tSirJOSEPH COOK.|SirJohn Forrest.|The  CHAIRMAN.-|The  CHAiRMAN.-|SirWILLIAMLYNE-|SirRobertbest.-|SirRobert Best.|SirROBERT BEST.|SirRobert Best.|SirRobert Best.|SirJOHNFORREST.|SirJohnForrest.|SirJOHN QUICK.-|The CHAIRM AN.|The CH AIRMAN.|The  SPEAKER__|The  CHAIRMAN.|Sirjohn Quick.|The Chairman:|The CHAI!RMAN|SirJohnQuick.|The CHAD1MAN)"), para), "TRUE", "FALSE")
unique_para <- data_frame(para  = unique(long$para)) %>%
filter(str_detect(para,"^Mr|^Sir|^An |^Several |^M r|^Mr.|Honorable|^M. r.|Colonel")) %>%
mutate(TF = ifelse(grepl("^(?<=SirNEVILLE HOWSE \\(CalareMinister for Defence\\) \\[3.50\\]|SirWILLI AM LYNE \\(Hume - Treasurer\\)  \\[5.51\\].  -|SirJOHN QUICK\\(Bendigo- PostmasterGeneral\\) \\[9.1\\]|The  DEPUTY CHAIRMAN \\(Hon. J. D. M. Dobie\\)  -|The  DEPUTY CHAIRMAN \\(Hon. W. C. Haworth\\)  -|The  DEPUTY CHAIRMAN \\(Hon. W. C. Haworth\\)  -|The ACTING CHAIRMAN \\(Mr. V. L. Solomon\\). - |The  DEPUTY CHAIRMAN \\(Hon. W. CHaworth\\)  -|SirJOHNFORREST \\(Swan- Treasurer\\) \\[9.59\\]. -|The  DEPUTY CHAIRMAN \\(Hon. Ian Robinson\\)-|The TEMPORARYCHAIRMAN \\(Mr. Atkinson\\). -|The ACTING CHAIRMAN \\(Mr. Batchelor\\). -|The ACTING CHAIRMAN \\(Mr. Fleming\\). -|The  DEPUTY CHAIRMAN \\(Dr Jenkins\\)  -|The ACTING CHAIRMAN \\(Mr. Kirwan\\). -|The  CHAIRMAN \\(Hon. J. M. Chanter\\).|SirHENRY GULLETT  \\(Henty\\) \\(3.24\\].-|The chairman \\(Mr. Fenton, M.P.\\) :|SirROBERT BEST \\(Kooyong\\) \\[4.0\\]. -|4\tSirLITTLETON GROOM  \\(Darling |The CH AIRMAN \\(Mr. Bayley\\). |The CHAIRMAN \\(Mr. Riordan\\).|The CHAIRMAN \\(Mr. McGrath\\).| The TEMPORARYCHAIRMAN. - |The CHAIRMAN \\(Mr. Bayley\\).|The CHAIRMAN \\(Mr. Prowse\\).|The CHAIRMAN \\(Mr. Lucock\\).|The CHAIRMAN \\(Mr. Bowden\\).|The CHAIRMAN \\(Mr. Bayley\\).|The CHAIRMAN \\(Mr. Adermann|SirJOHN QUICK \\(Bendigo\\). -|The CHAIRMAN \\(Mr. Clark\\).|The CHAIRMAN \\(Mr. Clark\\).|The CHAIRMAN \\(Mr McGrath\\)|SirWILLIAM LYNE \\(Hume\\). -|The TEMPORARY- CHAIRMAN.|The CHAIRMAN \\(Mr. Bell\\).|The  DEPUTY CHAIRMAN  .-|The TEMPORARY-CHAIRMAN.|The TEMPORARY CHAIRMAN.|The  DEPUTY CHAIRMAN.- |The  DEPUTY CHAIRMAN  -|SirWILLI AM McMILLAN. -|The ACTING CHAIRMAN. -|The  DEPUTY  CHAIRMAN.|The  DEPUTY  CHAIRMAN-|SirWilliam McMillan. -|SirWILLIAM McMILLAN. -|SirWilliam McMillan. -|The ACTING  CHAIRMAN.|The  DEPUTY CHAIRMAN.|The  DEPUTY CHAIRMAN-|SirWilliamMcMillan. -|SirWilliam Irvine.  -|SirWilliammcmillan.-|SirWilliam  Lyne.  -|SirWILLIAM LYN E. -|SirJohn Forrest. - |SirHenryGullett.  -|SirWILLIAM LYNE. -|Sirphilip  Fysh. -|SirNEVILLE HOWSE.-|SirJOHN FORREST. -|Colonel  Foxton. -|The Witness.  -  |SirWILLIAM LYNE.-|SirJOHN FORREST.-|SirHenry Gullett.|The  TREASURER.-|The -CHAIRMAN. -|SirWilliam Lyne.|SirWILLIAM LYNE-|\tSirJOSEPH COOK.|SirJohn Forrest.|The  CHAIRMAN.-|The  CHAiRMAN.-|SirWILLIAMLYNE-|SirRobertbest.-|SirRobert Best.|SirROBERT BEST.|SirRobert Best.|SirRobert Best.|SirJOHNFORREST.|SirJohnForrest.|SirJOHN QUICK.-|The CHAIRM AN.|The CH AIRMAN.|The  SPEAKER__|The  CHAIRMAN.|Sirjohn Quick.|The Chairman:|The CHAI!RMAN|SirJohnQuick.|The CHAD1MAN)"), para), "TRUE", "FALSE", TF)
mutate(TF = ifelse(grepl("^(?<=SirNEVILLE HOWSE \\(CalareMinister for Defence\\) \\[3.50\\]|SirWILLI AM LYNE \\(Hume - Treasurer\\)  \\[5.51\\].  -|SirJOHN QUICK\\(Bendigo- PostmasterGeneral\\) \\[9.1\\]|The  DEPUTY CHAIRMAN \\(Hon. J. D. M. Dobie\\)  -|The  DEPUTY CHAIRMAN \\(Hon. W. C. Haworth\\)  -|The  DEPUTY CHAIRMAN \\(Hon. W. C. Haworth\\)  -|The ACTING CHAIRMAN \\(Mr. V. L. Solomon\\). - |The  DEPUTY CHAIRMAN \\(Hon. W. CHaworth\\)  -|SirJOHNFORREST \\(Swan- Treasurer\\) \\[9.59\\]. -|The  DEPUTY CHAIRMAN \\(Hon. Ian Robinson\\)-|The TEMPORARYCHAIRMAN \\(Mr. Atkinson\\). -|The ACTING CHAIRMAN \\(Mr. Batchelor\\). -|The ACTING CHAIRMAN \\(Mr. Fleming\\). -|The  DEPUTY CHAIRMAN \\(Dr Jenkins\\)  -|The ACTING CHAIRMAN \\(Mr. Kirwan\\). -|The  CHAIRMAN \\(Hon. J. M. Chanter\\).|SirHENRY GULLETT  \\(Henty\\) \\(3.24\\].-|The chairman \\(Mr. Fenton, M.P.\\) :|SirROBERT BEST \\(Kooyong\\) \\[4.0\\]. -|4\tSirLITTLETON GROOM  \\(Darling |The CH AIRMAN \\(Mr. Bayley\\). |The CHAIRMAN \\(Mr. Riordan\\).|The CHAIRMAN \\(Mr. McGrath\\).| The TEMPORARYCHAIRMAN. - |The CHAIRMAN \\(Mr. Bayley\\).|The CHAIRMAN \\(Mr. Prowse\\).|The CHAIRMAN \\(Mr. Lucock\\).|The CHAIRMAN \\(Mr. Bowden\\).|The CHAIRMAN \\(Mr. Bayley\\).|The CHAIRMAN \\(Mr. Adermann|SirJOHN QUICK \\(Bendigo\\). -|The CHAIRMAN \\(Mr. Clark\\).|The CHAIRMAN \\(Mr. Clark\\).|The CHAIRMAN \\(Mr McGrath\\)|SirWILLIAM LYNE \\(Hume\\). -|The TEMPORARY- CHAIRMAN.|The CHAIRMAN \\(Mr. Bell\\).|The  DEPUTY CHAIRMAN  .-|The TEMPORARY-CHAIRMAN.|The TEMPORARY CHAIRMAN.|The  DEPUTY CHAIRMAN.- |The  DEPUTY CHAIRMAN  -|SirWILLI AM McMILLAN. -|The ACTING CHAIRMAN. -|The  DEPUTY  CHAIRMAN.|The  DEPUTY  CHAIRMAN-|SirWilliam McMillan. -|SirWILLIAM McMILLAN. -|SirWilliam McMillan. -|The ACTING  CHAIRMAN.|The  DEPUTY CHAIRMAN.|The  DEPUTY CHAIRMAN-|SirWilliamMcMillan. -|SirWilliam Irvine.  -|SirWilliammcmillan.-|SirWilliam  Lyne.  -|SirWILLIAM LYN E. -|SirJohn Forrest. - |SirHenryGullett.  -|SirWILLIAM LYNE. -|Sirphilip  Fysh. -|SirNEVILLE HOWSE.-|SirJOHN FORREST. -|Colonel  Foxton. -|The Witness.  -  |SirWILLIAM LYNE.-|SirJOHN FORREST.-|SirHenry Gullett.|The  TREASURER.-|The -CHAIRMAN. -|SirWilliam Lyne.|SirWILLIAM LYNE-|\tSirJOSEPH COOK.|SirJohn Forrest.|The  CHAIRMAN.-|The  CHAiRMAN.-|SirWILLIAMLYNE-|SirRobertbest.-|SirRobert Best.|SirROBERT BEST.|SirRobert Best.|SirRobert Best.|SirJOHNFORREST.|SirJohnForrest.|SirJOHN QUICK.-|The CHAIRM AN.|The CH AIRMAN.|The  SPEAKER__|The  CHAIRMAN.|Sirjohn Quick.|The Chairman:|The CHAI!RMAN|SirJohnQuick.|The CHAD1MAN)",para), "TRUE", "FALSE")
)
name <- data_frame(name=c('Mrs. Emily S', 'Dr. Richard L', 'Dr. Drake D', 'Mr. Mrdrmsmrs', 'Test Name'))
View(name)
name <- data_frame(name=c('Mrs. Emily S', 'Dr. Richard L', 'Dr. Drake D', 'Mr. Mrdrmsmrs', 'Test Name')) %>%
separate(name,c('prefix','name'),sep="(?<=.* \\.)")
name <- data_frame(name=c('Mrs. Emily S', 'Dr. Richard L', 'Dr. Drake D', 'Mr. Mrdrmsmrs', 'Test Name')) %>%
separate(name,c('prefix','name'),sep="(?<=.)")
name <- data_frame(name=c('Mrs. Emily S', 'Dr. Richard L', 'Dr. Drake D', 'Mr. Mrdrmsmrs', 'Test Name')) %>%
separate(name,c('prefix','name'),sep="(?<=[.])")
name <- data_frame(name=c('Mrs. Emily S', 'Dr. Richard L', 'Dr. Drake D', 'Mr. Mrdrmsmrs', 'Test Name')) %>%
separate(name,c('prefix','name'),sep="(?<=[.|Name])")
name <- data_frame(name=c('Mrs. Emily S', 'Dr. Richard L', 'Dr. Drake D', 'Mr. Mrdrmsmrs', 'Test Name')) %>%
separate(name,c('prefix','name'),sep="(?<=[.]|[Name])")
name <- data_frame(name=c('Mrs. Emily S', 'Dr. Richard L', 'Dr. Drake D', 'Mr. Mrdrmsmrs', 'Test Name')) %>%
separate(name,c('prefix','name'),sep="(?<=[.])|(?<=(Name))")
name <- data_frame(name=c('Mrs. Emily S', 'Dr. Richard L', 'Dr. Drake D', 'Mr. Mrdrmsmrs', 'Test Name')) %>%
separate(name,c('prefix','name'),sep="(?<=[.])|(?<=[Name])")
install.packages("sparklyr")
sc = spark_connect(master = "local", config = config)
library(sparklyr)
library(tidyverse)
sc = spark_connect(master = "local", config = config)
library(sqldf)
dat <- read.csv.sql("~/dropbboxsydneyuni/working_papers/indigeneity_left_wing/usa/data/usa_00001.csv")
dat <- read.csv.sql("~/dropboxsydneyuni/working_papers/indigeneity_left_wing/usa/data/usa_00001.csv")
library(sqldf)
dat <- read.csv.sql("~/dropboxsydneyuni/working_papers/indigeneity_left_wing/usa/data/usa_00001.csv")
dat <- read.csv.sql("~/dropboxsydneyuni/working_papers/indigeneity_left_wing/usa/data/usa_00001.csv" %>% select(1:113))
dat <- read.csv.sql("~/dropboxsydneyuni/working_papers/indigeneity_left_wing/usa/data/usa_00001.csv" %>% select(1:113))
dat <- read.csv.sql("~/dropboxsydneyuni/working_papers/indigeneity_left_wing/usa/data/usa_00001.csv") %>% select(1:113)
dat <- read.csv2.sql("~/dropboxsydneyuni/working_papers/indigeneity_left_wing/usa/data/usa_00001.csv",
sql = "select * from file", header=TRUE)
dat <- read.csv2.sql("~/dropboxsydneyuni/working_papers/indigeneity_left_wing/usa/data/usa_00001.csv", header=TRUE)
library(sqldf)
dat <- read.csv2.sql("~/dropboxsydneyuni/working_papers/indigeneity_left_wing/usa/data/usa_00001.csv", header=TRUE)
library(sparklyr)
spark_install(version = "2.1.0")
sc = spark_connect(master = "local")
options(sparklyr.java9 = TRUE)
sc = spark_connect(master = "local")
load("/Users/zmeers/Dropbox (Sydney Uni)/working_papers/JointLiuMansillo/data/session_info.RData")
si <- readRDS("/Users/zmeers/Dropbox (Sydney Uni)/working_papers/JointLiuMansillo/data/session_info.RData")
View(si)
library(data.table)
library(here)
?Startup
install.packages(c("antiword", "backports", "bayesplot", "BH", "binGroup", "bookdown", "Brobdingnag", "broom", "ca", "callr", "car", "carData", "caTools", "checkmate", "chron", "class", "classInt", "clue", "cluster", "codebook", "codetools", "covr", "cowplot", "crul", "curl", "data.table", "dataMaid", "dbplyr", "dendextend", "devEMF", "dgo", "doParallel", "DT", "e1071", "effects", "emmeans", "Epi", "evaluate", "ExPosition", "feather", "FNN", "foreign", "fpc", "fst", "future", "gamlss", "gamlss.data", "gamlss.dist", "geogrid", "geoR", "ggalluvial", "gganimate", "ggeffects", "ggiraph", "ggpol", "ggpubr", "ggridges", "ggthemes", "git2r", "globals", "gmp", "gtrendsR", "hansard", "haven", "htmlTable", "htmlwidgets", "httpuv", "httr", "hunspell", "huxtable", "idealstan", "igraph", "iterators", "janitor", "jcolors", "jomo", "jqr", "jsonlite", "kernlab", "knitr", "koRpus", "labelled", "laeken", "later", "lattice", "lazyrmd", "leaflet", "lemon", "lme4", "magick", "maptools", "markdown", "MASS", "Matrix", "matrixStats", "mclust", "MCMCpack", "measurements", "memisc", "mgcv", "mice", "microbenchmark", "mime", "mitml", "mockery", "modeltools", "MonetDBLite", "naniar", "nanotime", "ndjson", "nlme", "nloptr", "NLP", "officer", "openssl", "orcutt", "packrat", "pacman", "pander", "parlitools", "pdftools", "pillar", "pinp", "pkgdown", "plm", "plotly", "plotrix", "pls", "polyclip", "prediction", "prettyGraphs", "processx", "protolite", "psych", "quanteda", "quantreg", "questionr", "R.rsp", "R.utils", "r2d3", "RApiDatetime", "raster", "RcppArmadillo", "RcppCCTZ", "RcppEigen", "RcppParallel", "RCurl", "readODS", "readr", "readxl", "rem", "repr", "reprex", "reshape", "reticulate", "rgdal", "rgeos", "RgoogleMaps", "rjags", "RJSONIO", "rlang", "rmapshaper", "rmarkdown", "robustbase", "roxygen2", "rpart.plot", "rsconnect", "rsdmx", "rsm", "rstan", "rstanarm", "rstantools", "rstudioapi", "rtweet", "sandwich", "servr", "sf", "sfsmisc", "shinythemes", "shinyWidgets", "showtext", "sjlabelled", "sjmisc", "sjPlot", "sjstats", "slam", "snakecase", "spacetime", "spacyr", "sparklyr", "sparsepp", "spatstat.data", "spatstat.utils", "spData", "spelling", "StanHeaders", "statnet.common", "stinepack", "streamR", "stringdist", "styler", "survey", "survival", "sys", "sysfonts", "taRifx", "testit", "testthat", "tibble", "tidycensus", "tidygraph", "tidytext", "tidyxl", "tinytex", "tm", "TMB", "topicmodels", "transformr", "trimcluster", "tseries", "tsibble", "TTR", "tufte", "tweenr", "units", "unpivotr", "urltools", "VGAM", "visdat", "visNetwork", "webmockr", "webshot", "whoami", "wordcloud", "xfun", "xtable", "xts", "yaml", "zoo", "ztable"))
install.packages(c("data.table", "fst", "git2r", "jqr", "memisc", "mgcv", "protolite", "rgdal", "rgeos", "sf", "stringdist", "TMB", "topicmodels", "units"))
devtools::install_github('tractatus/velocyto.R')
install.packages(c("data.table", "fst", "git2r", "jqr", "memisc", "mgcv", "protolite", "rgdal", "rgeos", "sf", "stringdist", "TMB", "topicmodels", "units"))
Yes
library(fst)
usa <- read_fst("~/dropboxsydneyuni/working_papers/indigeneity_left_wing/usa/data/usa.fst")
library(here)
library(fs)
library(tidyverse)
library(xml2)
folder_sgml <- fs::dir_ls(here("data", "pb_archive", "source", "working", "SGML-XML converter", "SGML"), glob = "*.xml")
folder_sgml <- fs::dir_ls(here("data", "pb_archive", "source", "working", "SGML-XML_converter", "SGML"), glob = "*.xml")
folder_sgml <- fs::dir_ls(here("data", "pb_archive", "sources", "working", "SGML-XML_converter", "SGML"), glob = "*.xml")
folder_sgml <- fs::dir_ls(here("data", "pb_archive", "sources", "working", "SGML-XML_converter", "SGML"), glob = "*.xml")
knitr::opts_chunk$set(echo =FALSE, message=FALSE, warning=FALSE)
library(here)
library(tidyverse)
library(fs)
library(ussc)
here()
summary(m1 <- MASS::glm.nb(us_connections ~ mostcommon_uni_for_employees, data = startup_nodes_database))
startup_nodes_database <- read.csv(here("startup_nodes_database.csv")) %>%
filter(type == "Australian startups") %>%
select(-X) %>%
mutate(total_connections  = gsub("^0", NA_character_, total_connections),
au_connections  = gsub("^0", NA_character_, au_connections),
us_connections  = gsub("^0", NA_character_, us_connections)) %>%
mutate(au_connections = as.numeric(au_connections),
total_connections = as.numeric(total_connections),
us_connections = as.numeric(us_connections))
summary(startup_nodes_database)
ggplot(startup_nodes_database) +
geom_histogram(aes(as.numeric(us_connections)), fill = ussc_colours("red")) +
theme_ussc() +
labs(title = "Australian startups histogram",
x = "US connections")
ggplot(startup_nodes_database) +
geom_histogram(aes(as.numeric(au_connections)), fill = ussc_colours("dark blue")) +
theme_ussc() +
labs(title = "Australian startups histogram",
x = "Australian connections")
ggplot(startup_nodes_database) +
geom_histogram(aes(as.numeric(total_connections)), fill = ussc_colours("light blue")) +
theme_ussc() +
labs(title = "Australian startups histogram",
x = "Total connections")
summary(m1 <- MASS::glm.nb(us_connections ~ mostcommon_uni_for_employees, data = startup_nodes_database))
View(startup_nodes_database)
startup_nodes_database <- read.csv(here("startup_nodes_database.csv")) %>%
filter(type == "Australian startups") %>%
select(-X) %>%
mutate(total_connections  = gsub("^0", NA_character_, total_connections),
au_connections  = gsub("^0", NA_character_, au_connections),
us_connections  = gsub("^0", NA_character_, us_connections)) %>%
mutate(au_connections = as.numeric(au_connections),
total_connections = as.numeric(total_connections),
us_connections = as.numeric(us_connections)) %>%
select(company_name, total_connections, au_connections, us_connections, most_employees_in_country, most_employees_in_region, mostcommon_previous_employer, mostcommon_uni_region_for_employees, mostcommon_uni_for_employees, type, tag)
summary(startup_nodes_database)
summary(m1 <- MASS::glm.nb(us_connections ~ mostcommon_uni_for_employees, data = startup_nodes_database))
summary(m1 <- MASS::glm.nb(us_connections ~ mostcommon_uni_for_employees + mostcommon_previous_employer, data = startup_nodes_database))
install.packages("Rfiglet")
devtools::install_github("wrathematics/Rfiglet")
remotes::install_github("wrathematics/Rfiglet")
devtools::install_github("wrathematics/Rfiglet")
Rfiglet::figlet("hello")
library(data.table)
dat <- fread("s3://usaanalysis/merged_census_individual_60.csv")
dat <- fread("https://s3-ap-southeast-2.amazonaws.com/usaanalysis/merged_census_individual_60.csv")
dat <- fread("http://s3-ap-southeast-2.amazonaws.com/usaanalysis/merged_census_individual_60.csv")
dat <- foreign::read.dta("working_papers/indigeneity_left_wing/cross-national/AmericasBarometerIndigeneity2004_2014.dta")
library(readstata13)
dat <- read.dta13("working_papers/indigeneity_left_wing/cross-national/AmericasBarometerIndigeneity2004_2014.dta")
View(dat)
list(unique(dat$wave))
list(unique(dat$pais))
print(unique(dat$pais))
unique(dat$pais)
levels(dat$pais)
usa <- dat %>% filter(pais == "United States")
library(tidyverse)
usa <- dat %>% filter(pais == "United States")
au <- dat %>% filter(pais == "Canada")
rm(au)
rm(usa)
install.packages("Amelia")
Amelia::ameliagui()
ameliagui()
pscl
cite(pscl)
cite("pscl")
citation(M"MatchIt")
citation("MatchIt")
citation("pscl")
print(<Simon Jackman (2017). pscl: Classes and Methods for R Developed in the
Political Science Computational Laboratory. United States Studies Centre,
University of Sydney. Sydney, New South Wales, Australia. R package version
1.5.2. URL https://github.com/atahk/pscl/>, bibtex=TRUE)
print(<"Simon Jackman (2017). pscl: Classes and Methods for R Developed in the
Political Science Computational Laboratory. United States Studies Centre,
University of Sydney. Sydney, New South Wales, Australia. R package version
1.5.2. URL https://github.com/atahk/pscl/">, bibtex=TRUE)
print(<pscl>, bibtex=TRUE)
print("pscl", bibtex=TRUE)
toBibtex(.)
toBibtex(citation("pscl"))
citation("Amelia")
citation("margins")
install.packages('margins')
citation("margins")
citation("ggplot2")
citation("R")
citation()
library(statnet)
install.packages (" relevent ")
install.packages ("relevent")
library(tergm)
source('~/Dropbox (Sydney Uni)/linkedin/R/merge_linkedin_agtechreport.R', echo=TRUE)
install.packages(c("influenceR", "seriation"))
print("hello")
XZ
# load libraries
library(pacman)
p_load(FastLink, fst, data.table, tidyverse)
install.packages("fastLink")
install.packages("FactoClass")
install.packages("ade4")
install.packages("FactoClass")
library(ade4)
library(devtools)
install_github("kosukeimai/fastLink",dependencies=TRUE)
traceback()
install.packages("fastLink")
install.packages("FactoClass")
install.packages("FactoClass", dependencies = TRUE)
uninstall.packages('ade4')
remove.packages('ade4')
install.packages('ade4', dependencies = TRUE)
install.packages('fastLink')
install.packages('FactoClass')
install.packags('fastLink')
install.packages('fastLink')
update.packages('ade4')
install.packages('fastLink')
install.packages('fastLink')
library(fastLink)
install.packages('fastLink')
install.packages(c("blscrapeR", "checkmate", "clipr", "clue", "codebook", "data.table", "dtplyr", "e1071", "emmeans", "Epi", "evaluate", "flextable", "FNN", "forcats", "forecast", "forge", "fst", "future", "geojson", "geojsonlint", "gganimate", "ggmap", "ggsignif", "ggthemes", "git2r", "glmmTMB", "haven", "highcharter", "Hmisc", "idealstan", "irlba", "ISOcodes", "jomo", "jqr", "kableExtra", "labelled", "later", "lme4", "maptools", "memisc", "mgcv", "mlmRev", "modelr", "mvtnorm", "naniar", "pbapply", "pdftools", "pinp", "prediction", "protolite", "psych", "purrrlyr", "quanteda", "R.rsp", "R.utils", "RandomFields", "RandomFieldsUtils", "raster", "RcppArmadillo", "readabs", "readxl", "repr", "reticulate", "rgdal", "rgeos", "servr", "sf", "shinyWidgets", "skimr", "slam", "SnowballC", "sparklyr", "splashr", "srvyr", "StanHeaders", "stringdist", "survey", "sys", "TH.data", "tidygraph", "TMB", "topicmodels", "tsibble", "units", "urltools", "V8", "VGAM", "visdat", "webmockr", "xfun", "XML", "zip"))
library(pkgbuild)
has_rtools(debug = TRUE)
callr::rcmd_safe("config", "CC")
pkgbuild::setup_rtools()
pkgbuild::rtools_path()
install.packages('fastLink')
library(ade4)
install.packages('ade4')
install.packages('fastLink')
library('ade4')
version
version
install.packages('fastLink')
parallel::detectCores()
install.packages("summarytools")
knitr::opts_chunk$set(echo = FALSE,
warning = FALSE,
error = FALSE,
message = FALSE,
results="asis")
library(pacman)
p_load(knitr, foreign, scales, questionr, tidyverse, haven, labelled, summarytools)
st_options(plain.ascii = FALSE,       # This is very handy in all Rmd documents
style = "rmarkdown",        # This too
footnote = NA,             # Avoids footnotes which would clutter the results
subtitle.emphasis = FALSE  # This is a setting to experiment with - according to
)                                     # the theme used, it might improve the headings'
st_options(plain.ascii = FALSE,       # This is very handy in all Rmd documents
style = "rmarkdown",        # This too
footnote = NA,             # Avoids footnotes which would clutter the results
subtitle.emphasis = FALSE  # This is a setting to experiment with - according to
)                                     # the theme used, it might improve the headings'
p_load(knitr, foreign, scales, questionr, tidyverse, haven, labelled, summarytools)
library(summarytools)
remove(pander)
remove.packages(pander)
remove.packages("pander")
install.packages("pander")
install.packages("summarytools")
library(summarytools)
library(pander)
remove.packages("pander")
install.packages("pander")
library(pander)
knitr::opts_chunk$set(echo = FALSE,
warning = FALSE,
error = FALSE,
message = FALSE,
results="asis")
library(pacman)
p_load(knitr, foreign, scales, questionr, tidyverse, haven)
library(pander)
library(questionr)
remove.packages("dylib")
remove.packages("libR")
remove.packages("tidyverse")
version
install.packages('tidyverse')
install.packages("tidyverse")
library(questionr)
library(summarytools)
st_options(plain.ascii = FALSE,       # This is very handy in all Rmd documents
style = "rmarkdown",        # This too
footnote = NA,             # Avoids footnotes which would clutter the results
subtitle.emphasis = FALSE  # This is a setting to experiment with - according to
)                                     # the theme used, it might improve the headings'
update.packages('pander')
library(pander)
# read fst file
data_1960_1970 <- fst::read_fst(here("data", "clean", "merged_census_individual_1960_1970.fst"))
p_load(fastLink, fst, data.table, tidyverse, here, magrittr)
# load libraries
library(pacman)
p_load(fastLink, fst, data.table, tidyverse, here, magrittr)
# read fst file
data_1960_1970 <- fst::read_fst(here("data", "clean", "merged_census_individual_1960_1970.fst"))
##################################################
## Project:
## Script purpose:
## Date:
## Author: Zoe Meers
##################################################
##################################################
## Project:
## Date:
## Author: Zoe Meers
##################################################
##################################################
## Project:
## Date: Mon Mar  4 15:39:07 2019
## Author: Zoe Meers
##################################################
##################################################
## Project:
## Date: Mon Mar  4 15:39:07 2019
## Author: Zoe Meers
##################################################
head
##################################################
## Project:
## Date: Mon Mar  4 15:39:46 2019
## Author: Zoe Meers
##################################################
##################################################
## Project:
## Date: Mon Mar  4 15:39:54 2019
## Author: Zoe Meers
##################################################
he
setwd("rpackages/ussc")
pkgdown::clean_site()
remove.packages("fs")
install.packages('fs')
remove.packages('pkgdown')
install.packages('pkgdown')
pkgdown::clean_site()
