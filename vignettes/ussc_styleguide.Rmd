---
title: "USSC data visualisation style guide"
author: "Zoe Meers"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  warning = FALSE,
  message = FALSE,
  comment = FALSE,
  echo = FALSE
)
library(tidyverse)
library(ussc)
```



How we present data *matters*. Data visualization must expand our work -- there is little point in creating visualization pieces if they do not actually contribute to long form reports, explainers, or analysis of internal data. Our primary goal at USSC is to present our information in an aesthetic,  scientifically rigourous manner. We aim to convey our message as clearly and as cleanly as we can. Edward Tufte (one of the pioneers of data visualization) wrote in his book *Envisioning Information*, "Confusion and clutter are failures of design, not attributes of information" (p.53, 1990). It is important to remember that visualizing data is not for our benefit as researchers, but rather for those who consume our work.

With that being said, there are a few key points to keep in mind if you're working with data.

1. Given that we're an empirically-driven think-tank, our visualization work must stand up to the rigours of what constitutes an effective graph in scientific communication. 
2. This means following the best practices in the discipline of data visualization. It is a rich sub-field of statistics with decades of research to back up what constitutes as "best practice".


## USSC graphs

A standard USSC graph (for `R` users, `theme_ussc()`) has the following elements:

![](https://zmeers.github.io/dataviz_img/theme_ussc_copy.png)

* The main content width for the USSC's website is **780 pixels (px)** wide, which translates to **8.125 inches (in)** or **20.636 centimetres (cm)**. When saving a publication-ready graph, set the width to **8 inches** (**20 cm** or **780px**). Most graphs fit in this div.

* If the graphs are web-based, the height can vary. 

* For wide graphs that spans the entire width of the webpage, set the width as **1320 px** (**13.75 in** or **34.925 cm**).

* To avoid compression issues that lead to fuzzy fonts and lines, I set the width to be slightly less than the allowed maximum (i.e. 1300 px instead of 1320 px, or 34 cm instead of 35 cm). Play around with different file types (i.e. SVG or PDF instead of PNG). Avoid JPEG files. As a last resort, consider removing titles and captions from the file and adding them into the website manually. *This is a temporary stop-gap -- I will be working on a fix for this problem soon.*


## USSC colour schemes

<table>
<tr>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rib(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
<td style = "background-color:#CCCCCC;color:black;";> #CCCCCC <br> rgb(204, 204, 204) <br> hsl(0, 0%, 80%)</td>
<td style = "background-color:#8C8C8C;color:white;";> #8C8C8C<br>rgb(140, 140, 140) <br> hsl(0, 0%, 55%)</td>
<td style = "background-color:#000000;color:white;";> #000000<br>rgb(0, 0, 0) <br> hsl(0, 0%, 0%)</td>
</tr>
</table>


<table>
**Two colours**
<tr>
<td> <p style = "color:black;"> Light colour palette <br>`scale_colour_ussc('light')` <br> `scale_fill_ussc('light')`</p></td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Dark colour palette <br>`scale_colour_ussc('dark')` <br> `scale_fill_ussc('dark')`</p></td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Blue colour palette <br>`scale_colour_ussc('blue')` <br> `scale_fill_ussc('blue')`</p></td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Greyscale colour palette <br>`scale_colour_ussc('grey')` <br> `scale_fill_ussc('grey')`</p></td>
<td style = "background-color:#CCCCCC; color:black;";> #CCCCCC <br> rgb(204, 204, 204) <br> hsl(0, 0%, 80%)</td>
<td style = "background-color:#000000;color:white;";> #000000 <br> rgb(0, 0, 0) <br> hsl(0, 0%, 0%)</td>
</tr>
</table>

<table>
**Three colours**
<tr>
<td> <p style = "color:black;"> Main colour palette <br>`scale_colour_ussc('main')` <br> `scale_fill_ussc('main')`</p></td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Light colour palette <br>`scale_colour_ussc('light')` <br> `scale_fill_ussc('light')`</p></td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#765C8C;color:white;";> #765C8C <br> rgb(118, 92, 140) <br> hsl(273, 21%, 45%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Dark colour palette <br>`scale_colour_ussc('dark')` <br> `scale_fill_ussc('dark')`</p></td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
<td style = "background-color:#842A51;color:white;";> #842A51 <br> rgb(132, 42, 81) <br> hsl(334, 52%, 34%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Blue colour palette <br>`scale_colour_ussc('blue')` <br> `scale_fill_ussc('blue')`</p></td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#0E6BA8;color:white;";> #0E6BA8 <br> rgb(14, 107, 168) <br> hsl(204, 85%, 36%)</td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Greyscale colour palette <br>`scale_colour_ussc('grey')` <br> `scale_fill_ussc('grey')`</p></td>
<td style = "background-color:#CCCCCC;color:black;";> #CCCCCC <br> rgb(204, 204, 204) <br> hsl(0, 0%, 80%)</td>
<td style = "background-color:#8C8C8C;color:white;";> #8C8C8C <br> rgb(140, 140, 140) <br> hsl(0, 0%, 55%)</td>
<td style = "background-color:#000000;color:white;";> #000000 <br> rgb(0, 0, 0) <br> hsl(0, 0%, 0%)</td>
</tr>
</table>

<table>
**Four colours**
<tr>
<td> <p style = "color:black;"> Main colour palette <br>`scale_colour_ussc('main')` <br> `scale_fill_ussc('main')`</p></td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
<td style = "background-color:#097BBB;color:white;";> #097BBB <br> rgb(9, 123, 187) <br> hsl(202, 91%, 38%)</td>
<td style = "background-color:#4E71A9;color:white;";> #4E71A9 <br> rgb(78, 113, 169) <br> hsl(217, 37%, 48%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Light colour palette <br>`scale_colour_ussc('light')` <br> `scale_fill_ussc('light')`</p></td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#4F71A9;color:white;";> #4F71A9 <br> rgb(79, 113, 169) <br> hsl(217, 36%, 49%)</td>
<td style = "background-color:#9E466F;color:white;";> #9E466F <br> rgb(158, 70, 111) <br> hsl(332, 39%, 45%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Dark colour palette <br>`scale_colour_ussc('dark')` <br> `scale_fill_ussc('dark')` </p></td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
<td style = "background-color:#612F5B;color:white;";> #612f5b <br> rgb(97, 47, 91) <br> hsl(307, 35%, 28%)</td>
<td style = "background-color:#A72548;color:white;";> #a72548 <br> rgb(167, 37, 72) <br> hsl(344, 64%, 40%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;">Blue colour palette <br>`scale_colour_ussc('blue')` <br> `scale_fill_ussc('blue')` </p></td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#097BBC;color:white;";> #097bbc <br> rgb(9, 123, 188) <br> hsl(202, 91%, 39%)</td>
<td style = "background-color:#125A95;color:white;";> #125a95 <br> rgb(18, 90, 149) <br> hsl(207, 78%, 33%)</td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Greyscale colour palette <br>`scale_colour_ussc('grey')` <br> `scale_fill_ussc('grey')`</p></td>
<td style = "background-color:#CCCCCC;color:black;";> #CCCCCC <br> rgb(204, 204, 204) <br> hsl(0, 0%, 80%)</td>
<td style = "background-color:#A1A1A1;color:white;";> #A1A1A1 <br> rgb(161, 161, 161) <br> hsl(0, 0%, 63%)</td>
<td style = "background-color:#5D5D5D;color:white;";> #5D5D5D <br> rgb(93, 93, 93) <br> hsl(0, 0%, 36%)</td>
<td style = "background-color:#000000;color:white;";> #000000 <br> rgb(0, 0, 0) <br> hsl(0, 0%, 0%)</td>
</tr>
</table>


<table>
**Five colours**
<tr>
<td> <p style = "color:black;"> Main colour palette <br>`scale_colour_ussc('main')` <br> `scale_fill_ussc('main')`</p></td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
<td style = "background-color:#0E6BA8;color:white;";> #0E6BA8 <br> rgb(14, 107, 168) <br> hsl(204, 85%, 36%)</td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#765C8C;color:white;";> #765C8C <br> rgb(118, 92, 140) <br> hsl(273, 21%, 45%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Light colour palette <br>`scale_colour_ussc('light')` <br> `scale_fill_ussc('light')`</p></td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#3B7CB7;color:white;";> #3B7CB7 <br> rgb(59, 124, 183) <br> hsl(209, 51%, 47%)</td>
<td style = "background-color:#765C8C;color:white;";> #765C8C <br> rgb(118, 92, 140) <br> hsl(273, 21%, 45%)</td>
<td style = "background-color:#B13B60;color:white;";> #B13B60 <br> rgb(177, 59, 96) <br> hsl(341, 50%, 46%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Dark colour palette <br>`scale_colour_ussc('dark')` <br> `scale_fill_ussc('dark')`</p></td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
<td style = "background-color:#50315F;color:white;";> #50315F <br> rgb(80, 49, 95) <br> hsl(280, 32%, 28%)</td>
<td style = "background-color:#842A51;color:white;";> #842A51 <br> rgb(132, 42, 81)<br> hsl(334, 52%, 34%)</td>
<td style = "background-color:#B82243;color:white;";> #B82243 <br> rgb(184, 34, 67) <br> hsl(347, 69%, 43%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Blue colour palette <br>`scale_colour_ussc('blue')` <br> `scale_fill_ussc('blue')`</p></td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#0784C5;color:white;";> #0784C5 <br> rgb(7, 132, 197) <br> hsl(201, 93%, 40%)</td>
<td style = "background-color:#0E6BA8;color:white;";> #0E6BA8 <br> rgb(14, 107, 168) <br> hsl(204, 85%, 36%)</td>
<td style = "background-color:#15518B;color:white;";> #15518B <br> rgb(21, 81, 139) <br> hsl(209, 74%, 31%)</td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Greyscale colour palette <br>`scale_colour_ussc('grey')` <br> `scale_fill_ussc('grey')`</p></td>
<td style = "background-color:#CCCCCC;color:black;";> #CCCCCC<br>rgb(204, 204, 204) <br> hsl(0, 0%, 80%)</td>
<td style = "background-color:#ACACAC;color:white;";> #ACACAC <br> rgb(172, 172, 172) <br> hsl(0, 0%, 67%)</td>
<td style = "background-color:#8C8C8C;color:white;";> #8C8C8C <br> rgb(140, 140, 140) <br> hsl(0, 0%, 55%)</td>
<td style = "background-color:#464646;color:white;";> #464646 <br> rgb(70, 70, 70) <br> hsl(0, 0%, 27%)</td>
<td style = "background-color:#000000;color:white;";> #000000 <br> rgb(0, 0, 0) <br> hsl(0, 0%, 0%)</td>
</tr>
</table>

<table>
**Six colours**
<tr>
<td> <p style = "color:black;"> Main colour palette <br>`scale_colour_ussc('main')` <br> `scale_fill_ussc('main')`</p></td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110)<br> hsl(219, 59%, 27%)</td>
<td style = "background-color:#10619C;color:white;";> #10619C <br> rgb(16, 97, 156) <br> hsl(205, 81%, 34%)</td>
<td style = "background-color:#0589CB;color:white;";> #0589CB <br> rgb(5, 137, 203) <br> hsl(200, 95%, 41%)</td>
<td style = "background-color:#2F83C0;color:white;";> #2F83C0 <br> rgb(47, 131, 192) <br> hsl(205, 61%, 47%)</td>
<td style = "background-color:#8E4E7A;color:white;";> #8E4E7A <br> rgb(142, 78, 122) <br> hsl(319, 29%, 43%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Light colour palette <br>`scale_colour_ussc('light')` <br> `scale_fill_ussc('light')`</p></td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#2F83C0;color:white;";> #2F83C0 <br> rgb(47, 131, 192) <br> hsl(205, 61%, 47%)</td>
<td style = "background-color:#5E699D;color:white;";> #5E699D <br> rgb(94, 105, 157) <br> hsl(230, 25%, 49%)</td>
<td style = "background-color:#8E4E7A;color:white;";> #8E4E7A <br> rgb(142, 78, 122) <br> hsl(319, 29%, 43%)</td>
<td style = "background-color:#BD3457;color:white;";> #BD3457 <br> rgb(189, 52, 87) <br> hsl(345, 57%, 47%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Dark colour palette <br>`scale_colour_ussc('dark')` <br> `scale_fill_ussc('dark')`</p></td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br>rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
<td style = "background-color:#453362;color:white;";> #453362 <br> rgb(69, 51, 98) <br> hsl(263, 32%, 29%)</td>
<td style = "background-color:#6F2D57;color:white;";> #6F2D57 <br> rgb(111, 45, 87) <br> hsl(322, 42%, 31%)</td>
<td style = "background-color:#99274B;color:white;";> #99274B <br> rgb(153, 39, 75) <br> hsl(341, 59%, 38%)</td>
<td style = "background-color:#C32040;color:white;";> #C32040 <br> rgb(195, 32, 64) <br> hsl(348, 72%, 45%)</td>
<td style = "background-color:#ED1B35;color:white;";> #ED1B35 <br> rgb(237, 27, 53) <br> hsl(353, 85%, 52%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Blue colour palette <br>`scale_colour_ussc('blue')` <br> `scale_fill_ussc('blue')`</p></td>
<td style = "background-color:#009DE3;color:white;";> #009DE3 <br> rgb(0, 157, 227) <br> hsl(199, 100%, 45%)</td>
<td style = "background-color:#0589CB;color:white;";> #0589CB <br> rgb(5, 137, 203) <br> hsl(200, 95%, 41%)</td>
<td style = "background-color:#0B75B4;color:white;";> #0B75B4 <br> rgb(11, 117, 180) <br> hsl(202, 88%, 37%)</td>
<td style = "background-color:#10619C;color:white;";> #10619C <br> rgb(16, 97, 156) <br> hsl(205, 81%, 34%)</td>
<td style = "background-color:#164D85;color:white;";> #164D85 <br> rgb(22, 77, 133) <br> hsl(210, 72%, 30%)</td>
<td style = "background-color:#1C396E;color:white;";> #1C396E <br> rgb(28, 57, 110) <br> hsl(219, 59%, 27%)</td>
</tr>
<tr>
<td> <p style = "color:black;"> Greyscale colour palette <br>`scale_colour_ussc('grey')` <br> `scale_fill_ussc('grey')`</p></td>
<td style = "background-color:#CCCCCC;color:black;";> #CCCCCC <br> rgb(204, 204, 204) <br> hsl(0, 0%, 80%)</td>
<td style = "background-color:#B2B2B2;color:white;";> #B2B2B2 <br> rgb(178, 178, 178) <br> hsl(0, 0%, 70%)</td>
<td style = "background-color:#989898;color:white;";> #989898 <br> rgb(152, 152, 152) <br> hsl(0, 0%, 60%)</td>
<td style = "background-color:#6F6F6F;color:white;";> #6F6F6F <br> rgb(111, 111, 111 <br> hsl(0, 0%, 44%)</td>
<td style = "background-color:#383838;color:white;";> #383838 <br> rgb(56, 56, 56) <br> hsl(0, 0%, 22%)</td>
<td style = "background-color:#000000;color:white;";> #000000 <br> rgb(0, 0, 0) <br> hsl(0, 0%, 0%)</td>
</tr>
</table>



## General data visualization tips

* Avoid plotting graphs with different scales on the same plot or panel. Split them up! People are already confused by numbers and statistics. Our aim is to simplify our presentation so that everyone can get the key point. Plotting two graphs together on the same panel invites confusion. From first glance, it can be hard to tell which line belongs to what. [More on this from the team at datawrapper.](https://blog.datawrapper.de/dualaxis/)


* Erase non-data ink, within reason. Think about grid lines, axis lines, different colours, patterns - are they necessary for getting your point across?

```{r, echo = FALSE, width = 16}
graph5 <- read.csv("~/dropboxsydneyuni/agtech/R/plots/data_files/graph5.csv",stringsAsFactors = FALSE)
#ggplot
no <- ggplot(graph5, 
       aes(x=type, 
           y=value)) + 
  geom_bar(stat = "identity",  
           aes(fill = type)) +
  geom_text(aes(label=scales::dollar(value)), 
            vjust='inward',
            size=3.5) +
  labs(title = "Do not do this...",
      fill = '',
       caption = 'Source: USSC analysis',
       x='Type of investor', 
       y='$ invested') +
  ggthemes::theme_excel() +
  ggthemes::scale_fill_excel() + 
  theme(legend.position = 'none',
        panel.background = element_rect(fill = "white")) + 
  scale_x_discrete(labels = c(`Government Grants/Research Initiatives` = "Government\nGrants/Research\n Initiatives", 
                              `Venture Capital Private Equity Firms` = "Venture\nCapital/\nPrivate Equity\nFirms", 
                              `Angel Investors/Family Offices`="Angel\nInvestors/\nFamily\nOffices", 
                              `Corporate/Industry Representative`="Corporate/\nIndustry\nRep.", 
                              `Incubators/Accelerators`="Accelerator/\nIncubator", 
                              `Mixed Syndicate`="Mixed\nSyndicate"))
no
yes <- ggplot(graph5, 
       aes(x=reorder(`type`, + value), 
           y=value)) + 
  geom_bar(stat = "identity",  
           fill = ussc_colours("light blue"), 
           alpha=0.80) +
  geom_text(aes(label=scales::dollar(value)), 
            colour = ussc_colours("dark blue"),
            family="neosanspro",
            vjust='inward',
            size=3.5) +
  theme_ussc() + 
  labs(title = "Do this:",
       caption = 'Source: USSC analysis',
       x='', 
       y='') +
  theme(legend.position="none", 
        axis.text.y  = element_blank(),
        axis.text.x=element_text(family='universLight'),
        axis.ticks  = element_blank(), 
        panel.grid.major.x=element_blank(),
        panel.grid.minor.x= element_blank(), 
        panel.grid.minor.y= element_blank(), 
        panel.grid.major.y = element_blank(), 
        panel.border = element_blank()) +
  scale_y_continuous(labels=scales::dollar, 
                     position='left')  +
    scale_x_discrete(labels = c(`Government Grants/Research Initiatives` = "Government\nGrants/Research\n Initiatives", 
                              `Venture Capital Private Equity Firms` = "Venture\nCapital/\nPrivate Equity\nFirms", 
                              `Angel Investors/Family Offices`="Angel Investors/\nFamily Offices", 
                              `Corporate/Industry Representative`="Corporate/\nIndustry\nRep.", 
                              `Incubators/Accelerators`="Accelerator/\nIncubator", 
                              `Mixed Syndicate`="Mixed\nSyndicate"))
yes
```



* If there is a logical way to sort the data (and there usually is), do so. The worst way to plot a graph is simply leaving it in alphabetical order. Rarely does alphabetical order give us insight to the data!


* Really think about colour - does adding a colour bring new information to our understanding of the data? We use colour to differentiate between groups or layers. If all bars measure the same variable, use the same colour. If you want to highlight one group -- colour that specific bar a bright colour (for example <span style="background-color:#ED1B35;color:white;font-weight:bold;";>red</span> or <span style="background-color:#009DE3;color:white;font-weight:bold;";>light blue</span>), leaving all others grey. 

```{r}
ggplot(graph5, 
       aes(x=reorder(`type`, + value), 
           y=value)) + 
    geom_bar(stat = "identity",  
           fill = ussc_colours("light grey"), 
           alpha=0.80) +
  geom_bar(data = filter(graph5, type == "Government Grants/Research Initiatives"), stat = "identity",  
           fill = ussc_colours("light blue"), 
           alpha=0.80) +
  geom_text(aes(label=scales::dollar(value)), 
            colour = ussc_colours("dark blue"),
            family="neosanspro",
            vjust='inward',
            size=3.5) +
  theme_ussc() + 
  labs(caption = 'Source: USSC analysis',
       x='', 
       y='') +
  theme(legend.position="none", 
        axis.text.y  = element_blank(),
        axis.text.x=element_text(family='universLight'),
        axis.ticks  = element_blank(), 
        panel.grid.major.x=element_blank(),
        panel.grid.minor.x= element_blank(), 
        panel.grid.minor.y= element_blank(), 
        panel.grid.major.y = element_blank(), 
        panel.border = element_blank()) +
  scale_y_continuous(labels=scales::dollar, 
                     position='left')  +
    scale_x_discrete(labels = c(`Government Grants/Research Initiatives` = "Government\nGrants/Research\n Initiatives", 
                              `Venture Capital Private Equity Firms` = "Venture\nCapital/\nPrivate Equity\nFirms", 
                              `Angel Investors/Family Offices`="Angel Investors/\nFamily Offices", 
                              `Corporate/Industry Representative`="Corporate/\nIndustry\nRep.", 
                              `Incubators/Accelerators`="Accelerator/\nIncubator", 
                              `Mixed Syndicate`="Mixed\nSyndicate"))
```

Colour acts as a superb highlighter against a black and white plot.

* Direct annotations are *always* preferable to legends.

```{r}
label <- read.csv("~/dropboxsydneyuni/midterms_ussc/midterms-analysis-github/women_candidates/data/candidates_midterms.csv")%>%
  filter(Cycle == "2018")


read.csv("~/dropboxsydneyuni/midterms_ussc/midterms-analysis-github/women_candidates/data/candidates_midterms.csv") %>%
  ggplot() +
  geom_line(aes(Cycle, Female.Candidates, colour = party), size = 1.5) +
  geom_point(aes(Cycle, Female.Candidates, colour = party), size = 2.5) +
  theme_ussc() +
  scale_colour_ussc("main") +
  theme(
    legend.position = "top",
    panel.grid.minor = element_blank(),
    axis.text.x = element_text(angle = 90)
  ) +
  labs(
    title = "Do not do this:",
    y = "", colour = "", x = "",
    caption = "Source: Centre for Responsive Politics"
  ) + 
  scale_x_continuous(breaks = seq(1994, 2018, 1)) +  
  annotate("text", x = 2015, y = 50, colour = "purple", label = "Please note that the x-axis\nshould be horizontal for easy\n reading.") + 
  geom_curve(
    aes(x = 2016, y  = 30, xend = 2017, yend = 1),
    data = graph5,
    arrow = arrow(length = unit(0.03, "npc")),
    colour = "purple",
    curvature = -0.2) + 
  annotate("text", x = 2010, y = 400, colour = "purple", label = "Directly labeling data removes the cognitive load\nneeded to connect legends to lines or points") + 
  geom_curve(
    aes(x = 2010, y  = 430, xend = 2008, yend = 500),
    data = graph5,
    arrow = arrow(length = unit(0.03, "npc")),
    colour = "purple",
    curvature = 0.3) +
   geom_curve(
    aes(x = 2011, y  = 360, xend = 2016, yend = 300),
    data = graph5,
    arrow = arrow(length = unit(0.03, "npc")),
    colour = "purple",
    curvature = 0.3) 
read.csv("~/dropboxsydneyuni/midterms_ussc/midterms-analysis-github/women_candidates/data/candidates_midterms.csv") %>%
  ggplot() +
  geom_line(aes(Cycle, Female.Candidates, colour = party), size = 1.5) +
  geom_point(aes(Cycle, Female.Candidates, colour = party), size = 2.5) +
  theme_ussc() +
  directlabels::geom_dl(
    data = label, aes(Cycle, Female.Candidates,
      label = paste0(party, " (", Female.Candidates, ")"),
      colour = party
    ),
    method = list(directlabels::dl.trans(x = x - 3.5, y = y + .1),
      "last.points",
      cex = 1
    )
  ) +
  scale_colour_ussc("main") +
  theme(
    legend.position = "none",
    panel.grid.minor = element_blank()
  ) +
  scale_x_continuous(breaks = seq(1994, 2018, 2)) +
  labs(
    title = "Instead, do this:",
    y = "", colour = "", x = "",
    caption = "Source: Centre for Responsive Politics"
  )
```
 
* Direct labels are easier to understand and are quicker to read. Morever, we should work on accessibility. People who are colour blind might struggle to match a legend key to a specific point on the graph. (Also, our colours do not work well in the best of circumstances for people who are colour blind...)

* If you have direct annotations, remove extraneous information. Do not keep axis text, ticks, or lines unless necessary.

```{r}
ggplot(graph5, 
       aes(x=reorder(`type`, + value), 
           y=value)) + 
    geom_bar(stat = "identity",  
           fill = ussc_colours("light grey")) +
  geom_text(aes(label=scales::dollar(value)), 
            colour = ussc_colours("dark grey"),
            family="neosanspro",
            vjust='inward',
            size=3.5) +
  theme_ussc() + 
  labs(caption = 'Source: USSC analysis',
       x='', 
       y='') +
  annotate("text", x = 1.7, y = 37000000, colour = "purple", label = "The grid lines, y-axis line\nand text are unneccessary.") + 
  geom_curve(
    aes(x = 1.3, y  = 34000000, xend = 1.1, yend = 30000000),
    data = graph5,
    arrow = arrow(length = unit(0.03, "npc")),
    colour = "purple") + 
  geom_curve(
    aes(x = 0.7, y  = 34000000, xend = 0.5, yend = 33000000),
    data = graph5,
    curvature = -0.4,
    arrow = arrow(length = unit(0.03, "npc")),
    colour = "purple") + 
  theme(legend.position="none", 
        axis.text.x=element_text(family='universLight'),
        axis.ticks  = element_blank(), 
        axis.line.y = element_line(colour = "black"),
        panel.grid.major.x=element_blank(),
        panel.grid.minor.x= element_blank(), 
        panel.grid.minor.y= element_blank(), 
        panel.grid.major.y = element_line(colour = "black"), 
        panel.border = element_blank()) +
  scale_y_continuous(labels=scales::dollar, 
                     position='left')  +
    scale_x_discrete(labels = c(`Government Grants/Research Initiatives` = "Government\nGrants/Research\n Initiatives", 
                              `Venture Capital Private Equity Firms` = "Venture\nCapital/\nPrivate Equity\nFirms", 
                              `Angel Investors/Family Offices`="Angel Investors/\nFamily Offices", 
                              `Corporate/Industry Representative`="Corporate/\nIndustry\nRep.", 
                              `Incubators/Accelerators`="Accelerator/\nIncubator", 
                              `Mixed Syndicate`="Mixed\nSyndicate"))
```

* Moreover, take another look at the chart above. The dark grid lines overwhelm the data, which is what we want to highlight! The y-axis text is also completely uneccesary. Remember to remove the y-axis line when you remove the text. Lines add information when we can quantify the distance... Otherwise, they are useless. 

* A quick note on vertical x-axis: they are cramped, difficult to read and should be avoided. First, increase the width of the chart so that the labels fit horizontally. Second, concatenate the labels (i.e instead of 2012, '12 works just fine). If these options do not work, flip the chart so that the y-axis is where the x-axis used to be and vice-versa.


## Bar charts

* Mostly one variable
* Compares numerical variables for one (categorical or continuous) observation
* Shows relative amounts
* Can be used to stack one numerical variable into sub-groups (i.e. a stacked bar chart or a proportional bar chart)
* Can be grouped together 

```{r, fig.height=10, fig.width=10}
dat1 <- data.frame(
    sex = factor(c("Female","Female","Male","Male")),
    time = factor(c("Lunch","Dinner","Lunch","Dinner"), levels=c("Lunch","Dinner")),
    total_bill = c(13.53, 16.81, 16.24, 17.42)
)
one <- ggplot(mpg, aes(class)) + 
  geom_bar() +
  theme_ussc() + 
  labs(title = "a) Rotated bar chart") + 
  coord_flip() +
  theme(panel.grid.major.y = element_blank(),
        panel.grid.minor = element_blank())
two <- ggplot(mpg, aes(class)) + 
  geom_bar(aes(fill = drv)) +
  theme_ussc() + 
  scale_fill_ussc() + 
  labs(title = "b) Rotated stacked bar chart") + 
  coord_flip() + 
  theme(panel.grid.major.y = element_blank(),
        panel.grid.minor = element_blank())
three <- ggplot(data=dat1, aes(x=time, y=total_bill, fill=sex)) +
    geom_bar(stat="identity", 
             position=position_dodge(), 
             colour=ussc_colours("dark grey")) +
    theme_ussc() + 
    labs(title =  "c) Grouped bar chart") + 
    theme(legend.position = 'top',
          panel.grid.major.x = element_blank(),
          panel.grid.minor = element_blank()) + 
    scale_fill_ussc()
df <- data.frame(x = rep(c(2.9, 3.1, 4.5), c(5, 10, 4)))
four <- ggplot(df, aes(x)) + 
  geom_bar() + 
  labs(title = "d) Continuous bar chart") +
  theme_ussc() + 
  theme(panel.grid.major.x = element_blank(),
        panel.grid.minor = element_blank())
cowplot::plot_grid(one, two, three, four, nrow = 2)
```

* Bar charts are descriptive
* The y-axis should nearly always start at 0


## Histograms

* Similar to a bar chart but shows the count of all observations in each bin.

```{r}
ggplot(diamonds, aes(carat)) +
  geom_histogram(binwidth = 1) + 
  theme_ussc() + 
  scale_x_continuous(limits = c(0,5)) +
  theme(panel.grid.major.x = element_blank(),
        panel.grid.minor = element_blank(),
        axis.ticks = element_blank())
```


## Line charts

* Often used with time-series data
* Shows the trend in a variable
* Shows more than one variable with multiple lines (if they are on the same scale)
* Shows the same variable for multiple observations with multiple lines

```{r}
one <- ggplot(data=economics, aes(x=date, y=pop))+
  geom_line() + 
  theme_ussc() + 
  labs(title = "a) Standard line graph") + 
  theme(panel.grid.minor = element_blank()) + 
 # geom_text(aes("1990-03-01", 30000, label = "Lines are thin with a square edge", color = "purple"))
  annotate("text", x = as.Date("1990-08-01"), y = 300000, label = "Lines are thin with a square edge", color = "purple") +
   geom_curve(
    aes(x = as.Date("1990-08-01"), y  = 295000, xend = as.Date("1995-08-01"), yend = 280000),
    data = economics,
    arrow = arrow(length = unit(0.03, "npc")),
    colour = "purple",
    curvature = 0.3) +
   geom_curve(
    aes(x = as.Date("1990-08-01"), y  = 305000, xend = as.Date("2014-08-01"), yend = 322000),
    data = economics,
    arrow = arrow(length = unit(0.03, "npc")),
    colour = "purple",
    curvature = -0.3) 

data_summary <- function(data, varname, groupnames){
  require(plyr)
  summary_func <- function(x, col){
    c(mean = mean(x[[col]], na.rm=TRUE),
      sd = sd(x[[col]], na.rm=TRUE))
  }
  data_sum<-ddply(data, groupnames, .fun=summary_func,
                  varname)
  data_sum <- rename(data_sum, c("mean" = varname))
 return(data_sum)
}

df3 <- data_summary(ToothGrowth, varname="len", 
                    groupnames=c("supp", "dose"))
two <- ggplot(df3, aes(x=dose, y=len, group=supp, color=supp)) + 
    geom_errorbar(aes(ymin=len-sd, ymax=len+sd), width=.1, 
    position=position_dodge(0.05)) +
    geom_line() + 
    geom_point() +
    annotate("text", x = 1.2, y = 25, label = "OJ", colour = ussc_colours("dark blue")) + 
    annotate("text", x = 2.1, y = 28, label = "VC", colour = ussc_colours("red")) +
    scale_colour_ussc() +
    labs(title = "b) Line graph with standard error bars") + 
    theme_ussc() + 
    theme(legend.position = 'none',
          panel.grid.minor = element_blank())
cowplot::plot_grid(one, two, nrow = 2)
```

* Tip: avoid **spaghetti graphs** by faceting the data or by highlighting a subset of the data

```{r, fig.height = 12}
one <- ggplot(data=ChickWeight, 
       aes(x=Time, y=weight, color=Diet, group=Chick)) +
  geom_line() + 
  labs(title = "a) Sphagetti graph") + 
  scale_colour_ussc("light") + 
  theme_ussc()
two <- ggplot(data=ChickWeight, 
       aes(x=Time, y=weight, color=Diet, group=Chick)) +
  geom_line() + 
  labs(title = "a) Small multiples line graph") + 
  scale_colour_ussc("light") + 
  theme_ussc() + 
  theme(legend.position = 'none') + 
  facet_grid(~Diet)
three <- ggplot() +
  geom_line(data=ChickWeight, 
       aes(x=Time, y=weight, group=Chick), colour = ussc_colours("light grey")) + 
  geom_line(data=filter(ChickWeight, Diet == 2),
       aes(x=Time, y=weight, group=Chick), colour = "#4F71A9") + 
  labs(title = "c) Highlighting Diet == 2") + 
  theme_ussc()
cowplot::plot_grid(one, two, three, nrow = 3)
```

## Scatter plots

* Plots the relationship between two continuous variables

```{r, fig.height = 10}
one <- ggplot(mtcars, aes(x=wt, y=mpg)) + 
  geom_point() + 
  theme_ussc() + 
  labs(title = "a) Basic scatter plot")
two <- ggplot(data=iris, aes(x=Sepal.Length, y=Sepal.Width, color=Species)) + 
  geom_point(size=1.5) + 
  xlab("Sepal Length") + 
  ylab("Sepal Width") + 
  ggtitle("b) Scatterplot with smoothers") + 
  scale_colour_ussc("main") + 
  theme_ussc() + 
  theme(legend.position = 'bottom') + 
  geom_smooth(method="gam", formula= y~s(x, bs="cs"))

cowplot::plot_grid(one, two, nrow = 2)
```


## Maps

* First, choropleth maps are often viewed a problematic because geographic areas and population vary in size, so maps might mislead 
* Yet, people *love* choropleth maps - they are pretty! Keep in mind that, more often than not, they show population density instead of the variable one is trying to measure
* Tips: normalise the results before plotting



```{r}
library(fiftystater)

data("fifty_states") # this line is optional due to lazy data loading

crimes <- data.frame(state = tolower(rownames(USArrests)), USArrests)

# map_id creates the aesthetic mapping to the state name column in your data
 ggplot(crimes, aes(map_id = state)) + 
  # map points to the fifty_states shape data
  geom_map(aes(fill = Assault), map = fifty_states, colour = "white") + 
  expand_limits(x = fifty_states$long, y = fifty_states$lat) +
  coord_map() +
  scale_fill_ussc("light", discrete = FALSE) + 
  scale_x_continuous(breaks = NULL) +
  scale_y_continuous(breaks = NULL) +
  annotate("text", x = -88, y = 50, label = "Borders should (usually) be thin light lines", color = "purple") +
  labs(x = "", y = "") +
  theme(legend.position = "bottom", 
        panel.background = element_blank()) 

```


* Do not map data without breaking up geographic boundaries 

* Use Leaflet for interactive maps in `R`


```{r}
s <- rgdal::readOGR("~/dropboxsydneyuni/midterms_ussc/gerrymandering/geo/cb_2017_us_cd115_5m",
                    verbose=FALSE)
nc <- s[s$STATEFP==37,]

labels <- gsub(nc$CD115FP,pattern="^0",replacement="") %>%
    lapply(htmltools::HTML)
library(leaflet)
leaflet(nc,width=600,height=500) %>% 
    addProviderTiles(providers$Stamen.Toner) %>% 
    addPolygons(
        stroke = TRUE,
        fillColor="blue",
        weight = 2,
        opacity = 1,
        color = "red",
        fillOpacity=0.2,
        dashArray = "1",
        label=labels)
```


## Pie charts 

A note on pie charts:

> A table is nearly always better than a dumb pie chart; the only worse design than a pie chart is several of them, for then the viewer is asked to compare quantities located in spatial disarray both within and between pies. (Tufte, p.178, *The Visual Display of Quantitative Information*).






